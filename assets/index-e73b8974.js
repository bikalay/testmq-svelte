var He=Object.defineProperty;var Ge=(e,t,n)=>t in e?He(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var _=(e,t,n)=>(Ge(e,typeof t!="symbol"?t+"":t,n),n),ke=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var he=(e,t,n)=>(ke(e,t,"read from private field"),n?n.call(e):t.get(e)),de=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},se=(e,t,n,s)=>(ke(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Y(){}function je(e){return e()}function Se(){return Object.create(null)}function I(e){e.forEach(je)}function Oe(e){return typeof e=="function"}function ce(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Je(e){return Object.keys(e).length===0}function m(e,t){e.appendChild(t)}function G(e,t,n){e.insertBefore(t,n||null)}function L(e){e.parentNode&&e.parentNode.removeChild(e)}function Qe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function J(e){return document.createTextNode(e)}function E(){return J(" ")}function T(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function v(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ze(e){return e===""?null:+e}function $e(e){return Array.from(e.childNodes)}function we(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Ee(e,t){e.value=t??""}function k(e,t,n,s){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,s?"important":"")}function Ye(e,t){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];if(s.__value===t){s.selected=!0;return}}e.selectedIndex=-1}function et(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function tt(e,t,{bubbles:n=!1,cancelable:s=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,s,t),i}let K;function U(e){K=e}function Ae(){if(!K)throw new Error("Function called outside component initialization");return K}function Be(e){Ae().$$.on_mount.push(e)}function Le(){const e=Ae();return(t,n,{cancelable:s=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=tt(t,n,{cancelable:s});return i.slice().forEach(r=>{r.call(e,o)}),!o.defaultPrevented}return!0}}const M=[],X=[],ie=[],Re=[],nt=Promise.resolve();let ve=!1;function st(){ve||(ve=!0,nt.then(qe))}function ae(e){ie.push(e)}const ge=new Set;let C=0;function qe(){if(C!==0)return;const e=K;do{try{for(;C<M.length;){const t=M[C];C++,U(t),ot(t.$$)}}catch(t){throw M.length=0,C=0,t}for(U(null),M.length=0,C=0;X.length;)X.pop()();for(let t=0;t<ie.length;t+=1){const n=ie[t];ge.has(n)||(ge.add(n),n())}ie.length=0}while(M.length);for(;Re.length;)Re.pop()();ve=!1,ge.clear(),U(e)}function ot(e){if(e.fragment!==null){e.update(),I(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ae)}}const re=new Set;let it;function j(e,t){e&&e.i&&(re.delete(e),e.i(t))}function N(e,t,n,s){if(e&&e.o){if(re.has(e))return;re.add(e),it.c.push(()=>{re.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}function W(e){e&&e.c()}function O(e,t,n,s){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),s||ae(()=>{const r=e.$$.on_mount.map(je).filter(Oe);e.$$.on_destroy?e.$$.on_destroy.push(...r):I(r),e.$$.on_mount=[]}),o.forEach(ae)}function A(e,t){const n=e.$$;n.fragment!==null&&(I(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function rt(e,t){e.$$.dirty[0]===-1&&(M.push(e),st(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function le(e,t,n,s,i,o,r,l=[-1]){const a=K;U(e);const c=e.$$={fragment:null,ctx:[],props:o,update:Y,not_equal:i,bound:Se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Se(),dirty:l,skip_bound:!1,root:t.target||a.$$.root};r&&r(c.root);let u=!1;if(c.ctx=n?n(e,t.props||{},(f,h,...b)=>{const w=b.length?b[0]:h;return c.ctx&&i(c.ctx[f],c.ctx[f]=w)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](w),u&&rt(e,f)),h}):[],c.update(),u=!0,I(c.before_update),c.fragment=s?s(c.ctx):!1,t.target){if(t.hydrate){const f=$e(t.target);c.fragment&&c.fragment.l(f),f.forEach(L)}else c.fragment&&c.fragment.c();t.intro&&j(e.$$.fragment),O(e,t.target,t.anchor,t.customElement),qe()}U(a)}class ue{$destroy(){A(this,1),this.$destroy=Y}$on(t,n){if(!Oe(n))return Y;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}$set(t){this.$$set&&!Je(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const at="data";async function ct(e){const t=await fetch(at+e);if(t.ok)return await t.json();throw new Error}const lt="weather-dev",ut=6,Q="temperature",be="precipitation",ft=[{name:Q,config:{autoIncrement:!0},indexes:[{name:"t",unique:!1},{name:"v",unique:!1}]},{name:be,config:{autoIncrement:!0},indexes:[{name:"t",unique:!1},{name:"v",unique:!1}]}];class Ve{constructor(){_(this,"_queue");_(this,"_locked");this._queue=[],this._locked=!1}lock(){let t;const n=new Promise(s=>t=s);return this._queue.push(t),this._locked||this._unlock(),n}_unlock(){this._queue.length>0?(this._locked=!0,this._queue.shift()(()=>this._unlock())):this._locked=!1}}let me=null;const ht=new Ve;function dt(e,t,n){return new Promise((s,i)=>{console.log("initialize db");const o=window.indexedDB.open(e,t);o.onerror=()=>{i(o.error)},o.onupgradeneeded=()=>{console.log("initialize onupgradeneeded");const r=o.result;n.forEach(l=>{let a;r.objectStoreNames.contains(l.name)?o.transaction&&(a=o.transaction.objectStore(l.name)):a=r.createObjectStore(l.name,l.config),l.indexes&&l.indexes.forEach(c=>{const{name:u,unique:f}=c;a&&!a.indexNames.contains(u)&&a.createIndex(u,u,{unique:f})})})},o.onsuccess=()=>{console.log("initialize onsuccess");const r=o.result;s(r)}})}async function Z(){console.log("getDB");const e=await ht.lock();return me?console.log("return existing db"):me=await dt(lt,ut,ft),e(),me}async function gt(e){try{const i=(await Z()).transaction([e],"readonly").objectStore(e).count();return new Promise((o,r)=>{i.onsuccess=()=>{o(i.result)},i.onerror=()=>{r(i.error)}})}catch(t){console.error(t),console.log(e)}}async function oe(e,t){const i=(await Z()).transaction([e],"readonly").objectStore(e);let o;if(t){const{indexName:r,keyRange:l}=t;o=i.index(r).getAll(l)}else o=i.getAll();return new Promise((r,l)=>{o.onsuccess=()=>{r(o.result)},o.onerror=()=>{l(o.error)}})}async function Fe(e,t){const s=(await Z()).transaction([e],"readwrite"),i=s.objectStore(e);return t.forEach(o=>{i.add(o)}),new Promise((o,r)=>{s.oncomplete=l=>{o(l)},s.onerror=()=>{r(s.error)}})}async function ze(e,t){const r=(await Z()).transaction([e],"readonly").objectStore(e).index(t).openCursor();return new Promise((l,a)=>{r.onsuccess=()=>{const c=r.result;c&&c.value&&l(c.value[t]),l(null)},r.onerror=()=>{a(r.error)}})}async function Ne(e,t){const r=(await Z()).transaction([e],"readonly").objectStore(e).index(t).openCursor(null,"prev");return new Promise((l,a)=>{r.onsuccess=()=>{const c=r.result;c&&c.value&&l(c.value[t]),l(null)},r.onerror=()=>{a(r.error)}})}const mt=e=>e.toISOString().split("T")[0];function _t(e){return parseInt(e.split("-")[0])}function Te(e,t){const n=new Date(e+"T00:00:00.000");return n.setDate(n.getDate()+t),mt(n)}function pt(e){return e+"-01-01"}function vt(e){return e+"-12-31"}function We(e,t){return(new Date(t).getTime()-new Date(e).getTime())/(1e3*3600*24)}const wt="/temperature.json",bt="/precipitation.json",yt=new Ve,xt=[];function Ue(){xt.forEach(e=>e())}async function kt(e){console.log("initializeDBWithData");const t=await yt.lock(),n=!await gt(e);let s="";switch(e){case Q:s=wt;break;case be:s=bt;break}if(n){const i=await ct(s);console.log("getData From server"),console.time("insert"),await Fe(e,i.slice(0,500)),Ue(),St(e,i,500),console.timeEnd("insert"),console.log("insertMany")}t()}async function St(e,t,n){for(let s=n;s<t.length;s+=500)console.log("data",s),await new Promise(i=>{(o=>setTimeout(()=>{Fe(e,t.slice(o,o+500)).then(()=>{Ue(),i(null)})},1e3))(s)}),console.log("dataInserted",s)}async function Xe(e,t,n){let s=[];return t&&n?s=await oe(e,{indexName:"t",keyRange:IDBKeyRange.bound(t,n)}):t?s=await oe(e,{indexName:"t",keyRange:IDBKeyRange.lowerBound(t)}):n?s=await oe(e,{indexName:"t",keyRange:IDBKeyRange.upperBound(n)}):s=await oe(e),s.length===0?(await kt(e),Xe(e,t,n)):s}async function De(e){return(await Promise.all([ze(e,"t"),Ne(e,"t")])).map(n=>_t(n))}function _e(e,t){const n=window.location.hash.replace(/^#/,""),s=new URLSearchParams(n);t?s.set(e,t):s.delete(e),window.location.hash=s.toString()}function pe(e){const t=window.location.hash.replace(/^#/,"");return new URLSearchParams(t).get(e)}function Ie(e,t,n){const s=e.slice();return s[9]=t[n],s}function Pe(e){let t,n=e[9]+"",s,i;return{c(){t=p("option"),s=J(n),t.__value=i=e[9].toString(),t.value=t.__value},m(o,r){G(o,t,r),m(t,s)},p(o,r){r&4&&n!==(n=o[9]+"")&&we(s,n),r&4&&i!==(i=o[9].toString())&&(t.__value=i,t.value=t.__value)},d(o){o&&L(t)}}}function Et(e){let t,n,s,i,o,r,l=e[2],a=[];for(let c=0;c<l.length;c+=1)a[c]=Pe(Ie(e,l,c));return{c(){t=p("div"),n=p("select"),s=p("option"),i=J(e[1]);for(let c=0;c<a.length;c+=1)a[c].c();s.__value="",s.value=s.__value,v(n,"class","w-100 svelte-14p13cb"),e[0]===void 0&&ae(()=>e[7].call(n)),v(t,"class","year-picker w-100 svelte-14p13cb")},m(c,u){G(c,t,u),m(t,n),m(n,s),m(s,i);for(let f=0;f<a.length;f+=1)a[f].m(n,null);Ye(n,e[0]),o||(r=[T(n,"change",e[3]),T(n,"click",e[4]),T(n,"focus",e[4]),T(n,"change",e[7])],o=!0)},p(c,[u]){if(u&2&&we(i,c[1]),u&4){l=c[2];let f;for(f=0;f<l.length;f+=1){const h=Ie(c,l,f);a[f]?a[f].p(h,u):(a[f]=Pe(h),a[f].c(),a[f].m(n,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=l.length}u&5&&Ye(n,c[0])},i:Y,o:Y,d(c){c&&L(t),Qe(a,c),o=!1,I(r)}}}function Yt(e,t,n){let s;const i=Le();let{placeholder:o="Select Year..."}=t,{from:r=1970}=t,{to:l=new Date().getFullYear()}=t,{value:a=""}=t;function c(h){i("change",h.target.value)}function u(h){i("open")}function f(){a=et(this),n(0,a),n(2,s),n(6,l),n(5,r)}return e.$$set=h=>{"placeholder"in h&&n(1,o=h.placeholder),"from"in h&&n(5,r=h.from),"to"in h&&n(6,l=h.to),"value"in h&&n(0,a=h.value)},e.$$.update=()=>{e.$$.dirty&96&&n(2,s=new Array(l-r).fill(0).map((h,b)=>r+b))},[a,o,s,c,u,r,l,f]}class Ce extends ue{constructor(t){super(),le(this,t,Yt,Et,ce,{placeholder:1,from:5,to:6,value:0})}}function Rt(e){let t,n,s,i,o,r,l;return{c(){t=p("div"),n=p("input"),s=E(),i=p("label"),o=J(e[1]),v(n,"id",e[4]),v(n,"type","radio"),v(n,"name",e[2]),n.__value=e[3],n.value=n.__value,v(n,"class","svelte-15jo0gy"),e[7][0].push(n),v(i,"for",e[4]),v(i,"class","svelte-15jo0gy"),v(t,"class","btn-checkbox svelte-15jo0gy")},m(a,c){G(a,t,c),m(t,n),n.checked=n.__value===e[0],m(t,s),m(t,i),m(i,o),r||(l=[T(n,"change",e[5]),T(n,"change",e[6])],r=!0)},p(a,[c]){c&4&&v(n,"name",a[2]),c&8&&(n.__value=a[3],n.value=n.__value),c&1&&(n.checked=n.__value===a[0]),c&2&&we(o,a[1])},i:Y,o:Y,d(a){a&&L(t),e[7][0].splice(e[7][0].indexOf(n),1),r=!1,I(l)}}}function Tt(e,t,n){const s=Le(),i=Math.floor(Math.random()*Date.now());let{label:o=""}=t,{name:r=""}=t,{value:l=""}=t,{selectedValue:a=""}=t;function c(h){s("change",h.target.value)}const u=[[]];function f(){a=this.__value,n(0,a)}return e.$$set=h=>{"label"in h&&n(1,o=h.label),"name"in h&&n(2,r=h.name),"value"in h&&n(3,l=h.value),"selectedValue"in h&&n(0,a=h.selectedValue)},[a,o,r,l,i,c,f,u]}class Me extends ue{constructor(t){super(),le(this,t,Tt,Rt,ce,{label:1,name:2,value:3,selectedValue:0})}}class fe{constructor(t,n){_(this,"canvas");_(this,"context");_(this,"width");_(this,"height");this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=t,this.height=this.canvas.height=n}render(){}draw(){return this.render(),this.canvas}clear(){this.context.clearRect(0,0,this.width,this.height)}}class Dt extends fe{constructor(n,s,i,o,r){super(s,i);_(this,"name");_(this,"label");_(this,"offsetX");_(this,"offsetY");this.label=n,this.offsetX=o,this.offsetY=r,this.render()}render(){this.clear(),this.context.beginPath(),this.context.moveTo(this.offsetX,this.height-this.offsetY),this.context.lineTo(this.offsetX,2),this.context.lineTo(this.offsetX-5,10),this.context.moveTo(this.offsetX,2),this.context.lineTo(this.offsetX+5,10),this.context.moveTo(this.offsetX,this.height-this.offsetY),this.context.lineTo(this.width-2,this.height-this.offsetY),this.context.lineTo(this.width-10,this.height-this.offsetY+5),this.context.moveTo(this.width-2,this.height-this.offsetY),this.context.lineTo(this.width-10,this.height-this.offsetY-5),this.context.strokeStyle="red",this.context.lineWidth=2,this.context.stroke()}draw(){return this.canvas}}function Ke(e){let t=null,n=null;return e.forEach(s=>{t===null&&(t=s.v),n===null&&(n=s.v),t>s.v&&(t=s.v),n<s.v&&(n=s.v)}),[t,n]}function It(e,t,n,s=0,i=0){const[o,r]=Ke(e),l=(t-s*2)/(e.length-1),a=(n-i*2)/(r-o);return e.map((c,u)=>({...c,x:s+u*l,y:n-(i+Math.floor((c.v-o)*a))}))}function Pt(e,t,n){if((t-n)/e.length>60){const i=(t-n*2)/(e.length-1);return e.map((o,r)=>({...o,x:n+r*i,label:o.t.split("-").reverse().join(".")}))}if((t-n)/e.length>30){const i=(t-n*2)/(e.length-1);return e.map((o,r)=>({...o,x:n+r*i,label:r%2===0?o.t.split("-").reverse().join("."):""}))}if((t-n)/e.length>15){const i=(t-n*2)/(e.length-1);return e.map((o,r)=>({...o,x:n+r*i,label:r%4===0?o.t.split("-").reverse().join("."):""}))}if((t-n)/e.length>5){const i=(t-n*2)/(e.length-1);return e.map((o,r)=>({...o,x:n+r*i,label:r%12===0?o.t.split("-").reverse().join("."):""}))}const s=(t-n*2)/(e.length-1);return e.map((i,o)=>({...i,x:n+o*s,label:o%20===0?i.t.split("-").reverse().join("."):""}))}async function Ct(e,t,n,s,i,o){let r,l;t?r=pt(t):r=await ze(e,"t");const a=r;i&&(r=Te(r,Math.floor(i/o))),n?l=vt(n):l=await Ne(e,"t");const c=l;return We(r,l)>s/o&&(l=Te(r,s/o)),[r,l,a,c]}function Mt(e,t,n,s,i){const o=(s-i*2)/(n-t);return s-(i+Math.floor((e-t)*o))}var H;class jt extends fe{constructor(n,s,i,o,r){super(s,i);de(this,H,[]);_(this,"name");_(this,"label");_(this,"offsetX");_(this,"offsetY");this.label=n.label,this.name=n.name,this.data=n.data,this.offsetX=o,this.offsetY=r}set data(n){se(this,H,It(n,this.width,this.height,this.offsetX,this.offsetY))}get data(){return he(this,H)}render(){this.clear(),this.context.beginPath(),this.data.forEach((n,s)=>{s===0?this.context.moveTo(n.x,n.y):this.context.lineTo(n.x,n.y)}),this.context.strokeStyle="#000",this.context.lineWidth=2,this.context.stroke()}}H=new WeakMap;class Ot extends fe{constructor(n,s,i,o,r){super(s,i);_(this,"data",[]);_(this,"offsetX");_(this,"offsetY");this.offsetX=o,this.offsetY=r,this.data=n}render(){this.clear();const n=Pt(this.data,this.width,this.offsetX);this.context.beginPath(),this.context.font="12px serif",this.context.textAlign="center",n.map(s=>{const i=s.label?5:3;this.context.moveTo(s.x+.5,this.offsetY-i),this.context.lineTo(s.x+.5,this.offsetY+i),this.context.fillText(s.label,s.x,this.offsetY+15)}),this.context.strokeStyle="red",this.context.lineWidth=1,this.context.stroke()}}class At extends fe{constructor(n,s,i,o,r){super(s,i);_(this,"data",[]);_(this,"offsetX");_(this,"offsetY");this.offsetX=o,this.offsetY=r,this.data=n}render(){this.clear();const[n,s]=Ke(this.data);this.context.beginPath(),this.context.font="12px serif",this.context.textAlign="right";let i,o=1;s-n>50?i=5:s-n>20?i=2:s-n>10?i=1:s-n>5?(i=.3,o=10):s-n>3?(i=.2,o=10):(i=.1,o=10);const r=Math.floor(n*o)/o,l=Math.floor(s*o)/o;for(let a=r;a<l;a+=i){const c=Mt(a,n,s,this.height,this.offsetY);this.context.moveTo(this.offsetX-5,c),this.context.lineTo(this.offsetX+5,c),this.context.fillText((Math.floor(a*o)/o).toString(),this.offsetX-10,c)}this.context.strokeStyle="red",this.context.lineWidth=1,this.context.stroke()}}var B;class Bt{constructor(t,n){_(this,"canvas");_(this,"context");_(this,"chartRenderer");_(this,"axesRenderer");_(this,"dateScaleRenderer");_(this,"valuesScaleRenderer");de(this,B,void 0);this.canvas=t,this.context=this.canvas.getContext("2d"),this.chartRenderer=new jt(n,this.canvas.width,this.canvas.height,30,20),this.axesRenderer=new Dt(n.label,this.canvas.width,this.canvas.height,30,20),this.dateScaleRenderer=new Ot(n.data,this.canvas.width,this.canvas.height,30,this.canvas.height-20),this.valuesScaleRenderer=new At(n.data,this.canvas.width,this.canvas.height,30,20),se(this,B,n),this.draw()}set chart(t){this.chartRenderer.name=t.name,this.chartRenderer.data=t.data,this.dateScaleRenderer.data=t.data,this.valuesScaleRenderer.data=t.data,se(this,B,t),this.draw()}get chart(){return he(this,B)}draw(){this.clear(),this.context.drawImage(this.chartRenderer.draw(),0,0),this.context.drawImage(this.axesRenderer.draw(),0,0),this.context.drawImage(this.dateScaleRenderer.draw(),0,0),this.context.drawImage(this.valuesScaleRenderer.draw(),0,0)}clear(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}}B=new WeakMap;function Lt(e){let t,n,s,i,o,r,l,a,c;return{c(){t=p("div"),n=p("h1"),s=J("Loading..."),o=E(),r=p("canvas"),l=E(),a=p("div"),c=p("div"),c.textContent="Â ",v(n,"style",i=e[3]?"display: none":""),k(r,"width","800px"),k(r,"height","500px"),k(r,"position","absolute"),k(r,"display",(e[3],"block")),v(r,"width","800"),v(r,"height","500"),k(a,"overflow-x","scroll"),k(a,"max-width","100%"),k(a,"width","800px"),k(a,"position","absolute"),k(a,"height","520px"),k(t,"width","800px")},m(u,f){G(u,t,f),m(t,n),m(n,s),m(t,o),m(t,r),e[8](r),m(t,l),m(t,a),m(a,c),e[9](c),e[10](a)},p(u,[f]){f&8&&i!==(i=u[3]?"display: none":"")&&v(n,"style",i),f&8&&k(r,"display",(u[3],"block"))},i:Y,o:Y,d(u){u&&L(t),e[8](null),e[9](null),e[10](null)}}}function qt(e,t,n){let s,i,o,r,{fromYear:l="0000"}=t,{toYear:a="9999"}=t,{scale:c="5"}=t,{chart:u=Q}=t,f=!1;async function h(d,D,R,q=0,x=5){if(r&&s){const[ee,S,P,V]=await Ct(d,D,R,s.width,q,x),F=await Xe(d,ee,S);n(3,f=!!F.length),r.chart={data:F,name:d};const g=We(P,V);n(2,i.style.width=g*x+"px",i)}}Be(async()=>{r=new Bt(s,{data:[],name:u}),await h(u,l,a,0,parseInt(c));let d=!1;n(0,o.onscroll=function(){d&&(clearTimeout(d),d=null),d=setTimeout(()=>{requestAnimationFrame(async()=>{await h(u,l,a,o.scrollLeft,parseInt(c)),d=null})},10)},o),o.addEventListener("wheel",function(D){D.preventDefault(),n(0,o.scrollLeft+=D.deltaY,o)})});function b(d){X[d?"unshift":"push"](()=>{s=d,n(1,s)})}function w(d){X[d?"unshift":"push"](()=>{i=d,n(2,i)})}function $(d){X[d?"unshift":"push"](()=>{o=d,n(0,o)})}return e.$$set=d=>{"fromYear"in d&&n(4,l=d.fromYear),"toYear"in d&&n(5,a=d.toYear),"scale"in d&&n(6,c=d.scale),"chart"in d&&n(7,u=d.chart)},e.$$.update=()=>{e.$$.dirty&241&&h(u,l,a,o?o.scrollLeft:0,parseInt(c))},[o,s,i,f,l,a,c,u,b,w,$]}class Vt extends ue{constructor(t){super(),le(this,t,qt,Lt,ce,{fromYear:4,toYear:5,scale:6,chart:7})}}function Ft(e){let t,n,s,i,o,r,l,a,c,u,f,h,b,w,$,d,D,R,q,x,ee,S,P,V,F;return l=new Me({props:{label:"Temperature",value:Q,name:"chart-type",selectedValue:e[5]}}),l.$on("change",e[8]),u=new Me({props:{label:"Preseption",value:be,name:"chart-type",selectedValue:e[5]}}),u.$on("change",e[8]),w=new Ce({props:{from:e[0],to:e[1],placeholder:"Select Start Year",value:e[2]}}),w.$on("change",e[6]),w.$on("open",e[9]),d=new Ce({props:{from:e[0],to:e[1],placeholder:"Select End Year",value:e[3]}}),d.$on("change",e[7]),d.$on("open",e[9]),S=new Vt({props:{fromYear:e[2],toYear:e[3],scale:e[4],chart:e[5]}}),{c(){t=p("div"),n=p("h1"),n.textContent="Archive",s=E(),i=p("div"),o=p("aside"),r=p("div"),W(l.$$.fragment),a=E(),c=p("div"),W(u.$$.fragment),f=E(),h=p("main"),b=p("div"),W(w.$$.fragment),$=E(),W(d.$$.fragment),D=E(),R=p("div"),q=p("span"),q.textContent="Scale: ",x=p("input"),ee=E(),W(S.$$.fragment),v(r,"class","mb-5"),v(c,"class","mb-5"),v(b,"class","d-flex w-100"),v(x,"type","range"),v(x,"min","6"),v(x,"max","65"),v(h,"class","grow-1"),v(i,"class","d-flex"),v(t,"class","container")},m(g,y){G(g,t,y),m(t,n),m(t,s),m(t,i),m(i,o),m(o,r),O(l,r,null),m(o,a),m(o,c),O(u,c,null),m(i,f),m(i,h),m(h,b),O(w,b,null),m(b,$),O(d,b,null),m(h,D),m(h,R),m(R,q),m(R,x),Ee(x,e[4]),m(R,ee),O(S,R,null),P=!0,V||(F=[T(x,"change",e[10]),T(x,"input",e[10])],V=!0)},p(g,[y]){const ye={};y&32&&(ye.selectedValue=g[5]),l.$set(ye);const xe={};y&32&&(xe.selectedValue=g[5]),u.$set(xe);const te={};y&1&&(te.from=g[0]),y&2&&(te.to=g[1]),y&4&&(te.value=g[2]),w.$set(te);const ne={};y&1&&(ne.from=g[0]),y&2&&(ne.to=g[1]),y&8&&(ne.value=g[3]),d.$set(ne),y&16&&Ee(x,g[4]);const z={};y&4&&(z.fromYear=g[2]),y&8&&(z.toYear=g[3]),y&16&&(z.scale=g[4]),y&32&&(z.chart=g[5]),S.$set(z)},i(g){P||(j(l.$$.fragment,g),j(u.$$.fragment,g),j(w.$$.fragment,g),j(d.$$.fragment,g),j(S.$$.fragment,g),P=!0)},o(g){N(l.$$.fragment,g),N(u.$$.fragment,g),N(w.$$.fragment,g),N(d.$$.fragment,g),N(S.$$.fragment,g),P=!1},d(g){g&&L(t),A(l),A(u),A(w),A(d),A(S),V=!1,I(F)}}}function zt(e,t,n){let s,i,o=pe("from")||"",r=pe("to")||"",l="6",a=pe("chart")||Q;Be(async()=>{n(0,[s,i]=await De(a),s,n(1,i))});function c(w){n(2,o=w.detail),_e("from",o)}function u(w){n(3,r=w.detail),_e("to",r)}function f(w){n(5,a=w.detail),_e("chart",a)}async function h(){n(0,[s,i]=await De(a),s,n(1,i))}function b(){l=Ze(this.value),n(4,l)}return[s,i,o,r,l,a,c,u,f,h,b]}class Nt extends ue{constructor(t){super(),le(this,t,zt,Ft,ce,{})}}new Nt({target:document.getElementById("app")});
